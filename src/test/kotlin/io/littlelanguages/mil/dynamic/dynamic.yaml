- name: Hello World
  input: |
    (println "Hello world")
  output:
    program:
      values: []
      procedures:
        - procedure:
            name: _main
            arguments: []
            es:
              - println:
                  - 'Hello world'
- scenario:
    name: Declaration
    tests:
      - name: Invalid Form - too many arguments
        input: |
          (const x 10 20)
        output:
          - InvalidConstFormError:
              location: 0:1:1-14:1:15
      - name: Top-level constant
        input: |
          (const x 10)
        output:
          program:
            values:
              - x
            procedures:
              - procedure:
                  name: _main
                  arguments: []
                  es:
                    - assign:
                        symbol:
                          toplevel-value: x
                        e: 10
- scenario:
    name: Identifier Reference
    tests:
      - name: Unknown identifier
        input: |
          (println x)
        output:
          - InvalidConstFormError:
              name: x
              location: "9:1:10"
      - name: Top-level constant
        input: |
          (const x 10)

          (println x)
        output:
          program:
            values:
              - x
            procedures:
              - procedure:
                  name: _main
                  arguments: []
                  es:
                    - assign:
                        symbol:
                          toplevel-value: x
                        e: 10
                    - println:
                        - toplevel-value: x
