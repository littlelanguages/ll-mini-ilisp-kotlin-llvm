- name: Hello World
  input: |
    (println "Hello world")
  output:
    program:
      values: []
      procedures:
        - procedure:
            name: _main
            arguments: []
            es:
              - println:
                  - 'Hello world'
- scenario:
    name: Declaration
    tests:
      - name: Invalid Form - too many arguments
        input: |
          (const x 10 20)
        output:
          - InvalidConstFormError:
              location: 0:1:1-14:1:15
      - name: Top-level constant
        input: |
          (const x 10)
        output:
          program:
            values:
              - x
            procedures:
              - procedure:
                  name: _main
                  arguments: []
                  es:
                    - assign:
                        symbol:
                          toplevel-value: x
                        e: 10
      - name: Top-level procedure
        input: |
          (const (add a b) (+ a b))
        output:
          program:
            values: []
            procedures:
              - procedure:
                  name: add
                  arguments:
                    - a
                    - b
                  es:
                    - "+":
                        - parameter:
                            name: a
                            offset: 0
                        - parameter:
                            name: b
                            offset: 1
              - procedure:
                  name: _main
                  arguments: []
                  es: []
      - name: Procedure with duplicate parameter names
        input: |
          (const (add a a) (+ a a))
        output:
          - DuplicateParameterNameError:
              name: a
              location: "14:1:15"
- scenario:
    name: Identifier Reference
    tests:
      - name: Unknown identifier
        input: |
          (println x)
        output:
          - UnknownSymbolError:
              name: x
              location: "9:1:10"
      - name: Top-level constant
        input: |
          (const x 10)

          (println x)
        output:
          program:
            values:
              - x
            procedures:
              - procedure:
                  name: _main
                  arguments: []
                  es:
                    - assign:
                        symbol:
                          toplevel-value: x
                        e: 10
                    - println:
                        - toplevel-value: x
